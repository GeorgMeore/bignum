#include "bignum.h"


void fact(Number *out, ulong x)
{
	zero(out);
	inc(out, 1);
	while (x > 1) {
		Number t = {1, 1, (ulong[]){x}, 0};
		mul(out, t);
		x -= 1;
	}
}

void addsub(void)
{
}

void foo1(void)
{
	Number a = number(4);
	Number b = number(55);
	Number c = number(0);
	read(&a, "0x123456789abcdefedcba9876543210");
	print10(a); /* 94522879700260684131410776964739600 */
	read(&b, "0x912374198327491832749817348971298374981273498719283749817234987129384791234981237498123749875192357192381423");
	quorem(&b, &c, a);
	print16(b); /* 0x7f90290a6c45874e365d9af9edddb5bcb813ce79ad83091dc1376ce2980ba0fb8859998c0e6e9c2 */
	print16(c); /* 0x1231356f6a366934854b844a799403 */
	print16(a); /* 0x123456789abcdefedcba9876543210 */
	clear(&a);
	clear(&b);
	clear(&c);
}

void foo2(void)
{
	Number a = number(4);
	Number b = number(55);
	read(&a, "0x123456789abcdefedcba9876543210");
	read(&b, "0x912374198327491832749817348971298374981273498719283749817234987129384791234981237498123749875192357192381423");
	sub(&a, b);
	print16(a);
	print16(b);
	clear(&a);
	clear(&b);
}


void foo3(void)
{
	Number a = number(0);
	Number b = number(0);
	Number c = number(0);
	read(&a, "0xc19c644d57e521365db55f1e774ced353bb50b56c0308ed4ff3d46668b1e440735403f9e71cf07d8bc276f359c3a354ac7b08032a4c42e4545d88908fe5e95398a3a24c6fc55247c0fcfc79c7f28d0b3ad6ceea38386fd8921e81b543748c033bcc129e19ffb3258210fc8700e9984da0cba40a32a31c09dbaf0a8d18198b91e3da1f4dda66f8bc41b1c2fb7dbbf85a65110f187d0ad00bd11881a1b4301ebdf6a05103371fa296dd0a12381a6f5dcd0ff5f13ce58aa70a69c960cb78d01cb1c9c2b9688fa7ce33ac5907b5db3d8fd1ca8453dacb24cf1cd6d85cd81ed6ab65710682681c5d98fea186f32e72dff024cb346740602ef82b68fad5aca3d14b1d074fb8418dc0c46659363b144a1c2959e8ac9b323dd3b67f9d33e179f86424205a578d60e6391b42d1438f7cf627b7768ecc9f616ac1fd2a88b55c09047a28990292c8a23b8779584b9d34cd4145e3093879b6323391afee237e026344c711703f73a30ddbf0f00b41a39dc30356f3b4ffcf165040922fcd368ef06eabda5b9c9ec03daf5ba638880353acea70b60f20470d6430fdb8d2a3fa4bd87fb2c25acfb3bdffdba9c93223df1a969eed70c89a6b62864f975b71678cd039c21ac8300eb19df3833485502d5949ee4cd75630edebdf7b805a938ff32236e8e8ca52ca4fc61dde70952f7f1959666d84b32a8383df123026a54344aafdb0968320a613f34956d0922aba2e1a8ba264b2b7c6b987604eb3ec731a5459d833d49ce6e737ce480ddae6557c4041e16e06174cc4efec4c95aa3e8b40784d4c87c8de573fc5191bb0f17bdd5b5ce0bd964077bc6112c3a3fd18fa203c4bcd43dfed9203f2a3d044e53b2f96c3007aefe24fd317bea3382d19e0a10f4c88e054");
	read(&b, "0x4530894648899d9804cd78dcb8cd3a28c1bf675a6a5ff533a757dddb1842623003d4bc53d17c4d886e8b1e938b408c71ca46713802721c956966fee5f29d9199c9b20b430981acd79ef7dd96553344cd305696883480d13273bb7c685961589122506d92635865742b6e3ccf90ce8e84a5770b0d0e0ba9c0367c67bcf3dc159c73b1be957419d0d4e28bd8673b3c9edb4ac10b2288cd0c2eb54b87837e94aa88021d945a43b6d8fd9d787b75bd89b16bd5936ddcb65718a322da41d7acdb08867a8d416da70c09bd023c4562e521f2c7157e0421fcf2049b668391e2c69e4970e6dd2f74b14e02779dce2c8d5b21a877178c1ff9b9c3b8bb4e9ed44a65fe296b18648784a365d45a3bbf746572f66a44c7440098a1133cfd4078d6f012f6cdd2dca45f474e640524026f8f2bd5d8e051477dece77da661c2b08c34218dc5461a00ae62e0b798d34581a1a62f3597fd92ba7068dc82360b57a7c09069af7cee2cab826b75731d49400842dce2e0aa0e96aa74");
	quorem(&a, &c, b);
	print16(a);
	print16(b);
	print16(c);
	clear(&a);
	clear(&b);
	clear(&c);
}

void foo4(void)
{
	Number a = number(10);
	Number b = number(3);
	Number c = number(0);
	fact(&a, 1003);
	fact(&b, 999);
	//quorem2(&a, &c, b);
	quo(&a, b);
	print16(a);
	print16(b);
	print16(c);
	clear(&a);
	clear(&b);
	clear(&c);
}

void foo5(void)
{
	Number a = number(0);
	Number b = number(0);
	read(&a, "0xc19c644d57e521365db55f1e774ced353bb50b56c0308ed4ff3d46668b1e440735403f9e71cf07d8bc276f359c3a354ac7b08032a4c42e4545d88908fe5e95398a3a24c6fc55247c0fcfc79c7f28d0b3ad6ceea38386fd8921e81b543748c033bcc129e19ffb3258210fc8700e9984da0cba40a32a31c09dbaf0a8d18198b91e3da1f4dda66f8bc41b1c2fb7dbbf85a65110f187d0ad00bd11881a1b4301ebdf6a05103371fa296dd0a12381a6f5dcd0ff5f13ce58aa70a69c960cb78d01cb1c9c2b9688fa7ce33ac5907b5db3d8fd1ca8453dacb24cf1cd6d85cd81ed6ab65710682681c5d98fea186f32e72dff024cb346740602ef82b68fad5aca3d14b1d074fb8418dc0c46659363b144a1c2959e8ac9b323dd3b67f9d33e179f86424205a578d60e6391b42d1438f7cf627b7768ecc9f616ac1fd2a88b55c09047a28990292c8a23b8779584b9d34cd4145e3093879b6323391afee237e026344c711703f73a30ddbf0f00b41a39dc30356f3b4ffcf165040922fcd368ef06eabda5b9c9ec03daf5ba638880353acea70b60f20470d6430fdb8d2a3fa4bd87fb2c25acfb3bdffdba9c93223df1a969eed70c89a6b62864f975b71678cd039c21ac8300eb19df3833485502d5949ee4cd75630edebdf7b805a938ff32236e8e8ca52ca4fc61dde70952f7f1959666d84b32a8383df123026a54344aafdb0968320a613f34956d0922aba2e1a8ba264b2b7c6b987604eb3ec731a5459d833d49ce6e737ce480ddae6557c4041e16e06174cc4efec4c95aa3e8b40784d4c87c8de573fc5191bb0f17bdd5b5ce0bd964077bc6112c3a3fd18fa203c4bcd43dfed9203f2a3d044e53b2f96c3007aefe24fd317bea3382d19e0a10f4c88e054");
	read(&b, "0x4530894648899d9804cd78dcb8cd3a28c1bf675a6a5ff533a757dddb1842623003d4bc53d17c4d886e8b1e938b408c71ca46713802721c956966fee5f29d9199c9b20b430981acd79ef7dd96553344cd305696883480d13273bb7c685961589122506d92635865742b6e3ccf90ce8e84a5770b0d0e0ba9c0367c67bcf3dc159c73b1be957419d0d4e28bd8673b3c9edb4ac10b2288cd0c2eb54b87837e94aa88021d945a43b6d8fd9d787b75bd89b16bd5936ddcb65718a322da41d7acdb08867a8d416da70c09bd023c4562e521f2c7157e0421fcf2049b668391e2c69e4970e6dd2f74b14e02779dce2c8d5b21a877178c1ff9b9c3b8bb4e9ed44a65fe296b18648784a365d45a3bbf746572f66a44c7440098a1133cfd4078d6f012f6cdd2dca45f474e640524026f8f2bd5d8e051477dece77da661c2b08c34218dc5461a00ae62e0b798d34581a1a62f3597fd92ba7068dc82360b57a7c09069af7cee2cab826b75731d49400842dce2e0aa0e96aa74");
	//read(&a, "0x912374198327491832749817348971298374981273498719283749817234987129384791234981237498123749875192357192381423");
	//read(&b, "0x123456789abcdefedcba9876543210af880");
	//read(&a, "0xc19c644d57e521365db55");
	//read(&b, "0x4530894648899d9804cd7");
	quo(&a, a);
	print16(a);
	clear(&a);
	clear(&b);
}

void foo6(void)
{
	Number a = number(0);
	Number b = number(0);
	read(&a, "0xc19c644d57e521365db55f1e774ced353bb50b56c0308ed4ff3d46668b1e440735403f9e71cf07d8bc276f359c3a354ac7b08032a4c42e4545d88908fe5e95398a3a24c6fc55247c0fcfc79c7f28d0b3ad6ceea38386fd8921e81b543748c033bcc129e19ffb3258210fc8700e9984da0cba40a32a31c09dbaf0a8d18198b91e3da1f4dda66f8bc41b1c2fb7dbbf85a65110f187d0ad00bd11881a1b4301ebdf6a05103371fa296dd0a12381a6f5dcd0ff5f13ce58aa70a69c960cb78d01cb1c9c2b9688fa7ce33ac5907b5db3d8fd1ca8453dacb24cf1cd6d85cd81ed6ab65710682681c5d98fea186f32e72dff024cb346740602ef82b68fad5aca3d14b1d074fb8418dc0c46659363b144a1c2959e8ac9b323dd3b67f9d33e179f86424205a578d60e6391b42d1438f7cf627b7768ecc9f616ac1fd2a88b55c09047a28990292c8a23b8779584b9d34cd4145e3093879b6323391afee237e026344c711703f73a30ddbf0f00b41a39dc30356f3b4ffcf165040922fcd368ef06eabda5b9c9ec03daf5ba638880353acea70b60f20470d6430fdb8d2a3fa4bd87fb2c25acfb3bdffdba9c93223df1a969eed70c89a6b62864f975b71678cd039c21ac8300eb19df3833485502d5949ee4cd75630edebdf7b805a938ff32236e8e8ca52ca4fc61dde70952f7f1959666d84b32a8383df123026a54344aafdb0968320a613f34956d0922aba2e1a8ba264b2b7c6b987604eb3ec731a5459d833d49ce6e737ce480ddae6557c4041e16e06174cc4efec4c95aa3e8b40784d4c87c8de573fc5191bb0f17bdd5b5ce0bd964077bc6112c3a3fd18fa203c4bcd43dfed9203f2a3d044e53b2f96c3007aefe24fd317bea3382d19e0a10f4c88e054");
	print10(a);
	//read(&a, "0xc19c644d57e521365db55f1e774ced353bb50b56c0308ed4ff3d46668b1e440735403f9e71cf07d8bc276f359c3a354ac7b08032a4c42e4545d88908fe5e95398a3a24c6fc55247c0fcfc79c7f28d0b3ad6ceea38386fd8921e81b543748c033bcc129e19ffb3258210fc8700e9984da0cba40a32a31c09dbaf0a8d18198b91e3da1f4dda66f8bc41b1c2fb7dbbf85a65110f187d0ad00bd11881a1b4301ebdf6a05103371fa296dd0a12381a6f5dcd0ff5f13ce58aa70a69c960cb78d01cb1c9c2b9688fa7ce33ac5907b5db3d8fd1ca8453dacb24cf1cd6d85cd81ed6ab65710682681c5d98fea186f32e72dff024cb346740602ef82b68fad5aca3d14b1d074fb8418dc0c46659363b144a1c2959e8ac9b323dd3b67f9d33e179f86424205a578d60e6391b42d1438f7cf627b7768ecc9f616ac1fd2a88b55c09047a28990292c8a23b8779584b9d34cd4145e3093879b6323391afee237e026344c711703f73a30ddbf0f00b41a39dc30356f3b4ffcf165040922fcd368ef06eabda5b9c9ec03daf5ba638880353acea70b60f20470d6430fdb8d2a3fa4bd87fb2c25acfb3bdffdba9c93223df1a969eed70c89a6b62864f975b71678cd039c21ac8300eb19df3833485502d5949ee4cd75630edebdf7b805a938ff32236e8e8ca52ca4fc61dde70952f7f1959666d84b32a8383df123026a54344aafdb0968320a613f34956d0922aba2e1a8ba264b2b7c6b987604eb3ec731a5459d833d49ce6e737ce480ddae6557c4041e16e06174cc4efec4c95aa3e8b40784d4c87c8de573fc5191bb0f17bdd5b5ce0bd964077bc6112c3a3fd18fa203c4bcd43dfed9203f2a3d044e53b2f96c3007aefe24fd317bea3382d19e0a10f4c88e054");
	//read(&b, "0x4530894648899d9804cd78dcb8cd3a28c1bf675a6a5ff533a757dddb1842623003d4bc53d17c4d886e8b1e938b408c71ca46713802721c956966fee5f29d9199c9b20b430981acd79ef7dd96553344cd305696883480d13273bb7c685961589122506d92635865742b6e3ccf90ce8e84a5770b0d0e0ba9c0367c67bcf3dc159c73b1be957419d0d4e28bd8673b3c9edb4ac10b2288cd0c2eb54b87837e94aa88021d945a43b6d8fd9d787b75bd89b16bd5936ddcb65718a322da41d7acdb08867a8d416da70c09bd023c4562e521f2c7157e0421fcf2049b668391e2c69e4970e6dd2f74b14e02779dce2c8d5b21a877178c1ff9b9c3b8bb4e9ed44a65fe296b18648784a365d45a3bbf746572f66a44c7440098a1133cfd4078d6f012f6cdd2dca45f474e640524026f8f2bd5d8e051477dece77da661c2b08c34218dc5461a00ae62e0b798d34581a1a62f3597fd92ba7068dc82360b57a7c09069af7cee2cab826b75731d49400842dce2e0aa0e96aa74");
	//read(&a, "0x912374198327491832749817348971298374981273498719283749817234987129384791234981237498123749875192357192381423");
	//read(&b, "0x123456789abcdefedcba9876543210af880");
	read(&b, "0xc19c644d57e521365db55");
	read(&a, "0x4530894648899d9804cd7");
	quo(&a, b);
	print16(a);
	print16(b);
	clear(&a);
	clear(&b);
}

void foo7(void)
{
	Number a = number(100);
	Number b = number(-100);
	mul(&a, b);
	print10(a);
	clear(&a);
	clear(&b);
}

void foo8(void)
{
	Number a = number(100);
	//read(&a, "0xffffffffffffffff");
	//read(&a, "0x912374198327491832749817348971298374981273498719283749817234987129384791234981237498123749875192357192381423");
	read(&a, "0xc19c644d57e521365db55f1e774ced353bb50b56c0308ed4ff3d46668b1e440735403f9e71cf07d8bc276f359c3a354ac7b08032a4c42e4545d88908fe5e95398a3a24c6fc55247c0fcfc79c7f28d0b3ad6ceea38386fd8921e81b543748c033bcc129e19ffb3258210fc8700e9984da0cba40a32a31c09dbaf0a8d18198b91e3da1f4dda66f8bc41b1c2fb7dbbf85a65110f187d0ad00bd11881a1b4301ebdf6a05103371fa296dd0a12381a6f5dcd0ff5f13ce58aa70a69c960cb78d01cb1c9c2b9688fa7ce33ac5907b5db3d8fd1ca8453dacb24cf1cd6d85cd81ed6ab65710682681c5d98fea186f32e72dff024cb346740602ef82b68fad5aca3d14b1d074fb8418dc0c46659363b144a1c2959e8ac9b323dd3b67f9d33e179f86424205a578d60e6391b42d1438f7cf627b7768ecc9f616ac1fd2a88b55c09047a28990292c8a23b8779584b9d34cd4145e3093879b6323391afee237e026344c711703f73a30ddbf0f00b41a39dc30356f3b4ffcf165040922fcd368ef06eabda5b9c9ec03daf5ba638880353acea70b60f20470d6430fdb8d2a3fa4bd87fb2c25acfb3bdffdba9c93223df1a969eed70c89a6b62864f975b71678cd039c21ac8300eb19df3833485502d5949ee4cd75630edebdf7b805a938ff32236e8e8ca52ca4fc61dde70952f7f1959666d84b32a8383df123026a54344aafdb0968320a613f34956d0922aba2e1a8ba264b2b7c6b987604eb3ec731a5459d833d49ce6e737ce480ddae6557c4041e16e06174cc4efec4c95aa3e8b40784d4c87c8de573fc5191bb0f17bdd5b5ce0bd964077bc6112c3a3fd18fa203c4bcd43dfed9203f2a3d044e53b2f96c3007aefe24fd317bea3382d19e0a10f4c88e054");
	print10(a);
	square(&a);
	print10(a);
	clear(&a);
}

/* TODO: proper tests */
int main(void)
{
	foo8();
	return 0;
}
